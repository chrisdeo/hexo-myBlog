---
title: 也许你正则的基础并没有那么好
date: 2019-08-14 19:43:49
tags:
  - Javascript
  - 正则
  - RegExp
---

> &emsp;&emsp;stay hungry, stay foolish.

&emsp;&emsp;其实在之前的博客当中曾经做过一篇高阶的正则操作，但是最近发现自身的正则基础其实挺弟弟的，所以希望借这篇夯实一下。

<escape><!-- more --></escape>

## 填坑

### 量词

&emsp;&emsp;量词其实语法非常简单。但，概念性的东西如果没有经过仔细考究，就容易跟别的一些概念混淆...

&emsp;&emsp;量词本身是作为修饰存在的，它与前面匹配到的内容组合使用。

&emsp;&emsp;那我们看有哪些量词：

&emsp;&emsp;1. `+`：匹配前面正则内容至少1次(**>=1**)，它等价于`{1,}`。
&emsp;&emsp;2. `*`：匹配前面正则内容任意次(**>=0**)，它等价于`{0,}`。
&emsp;&emsp;3. `?`：匹配前面正则内容0次或1次(**0|1**)，它等价于`{0, 1}`。在别的编程语言中`?`同时也代表着**贪婪匹配（在js中就是没有`?`量词限制的正则）的对立面**，即匹配尽量少的字符。这里的贪婪可能还是比较抽象，下面我会先聊一个之前弄混的特殊字符`.`，然后以一个例子来说明贪婪问题。

&emsp;&emsp;`.`在正则匹配中的作用是什么呢？**它会匹配除换行符之外的任何单个字符。**根据官方文档的阐释，首先它不是一个量词，并且只匹配单个字符。

&emsp;&emsp;搞清楚具体的含义后，我们开始讨论`?`的非贪婪作用模式，默认情况下。像`+`，`*`这样的量词匹配都是贪婪的，它们会尽可能多地去匹配正则内容，但是当我们在这些量词后面再补上一个`?`就会使得贪婪匹配变为非贪婪匹配，就以下面这个`.`、`*`和`?`结合的匹配为例：

```javascript
    let str = 'some <foo> <bar> new </bar> </foo> thing';
    let greedyReg = /<.*>/;
    greedyReg.exec(str)[0]; // '<foo> <bar> new </bar> </foo>'
    let nonGreedyReg = /<.*?>/;
    nonGreedyReg.exec(str)[0]; // '<foo>'
```

&emsp;&emsp;更多的非贪婪结合场景：
&emsp;&emsp;`x*?`
&emsp;&emsp;`x+?`
&emsp;&emsp;`x??`
&emsp;&emsp;`x{n}?`
&emsp;&emsp;`x{n,}?`
&emsp;&emsp;`x{n,m}?`
